<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="style.css">
  <title>JS Promises</title>
</head>
<body>
<h1>Promises using fetch</h1>
<hr>
<h4>What's a promise?</h4>
<ul>
  <h6>Three States</h6>
  <li>pending</li>
  <li>resolved</li>
  <li>rejected</li>
</ul>

<h4>Async vs Sync</h4>
<table>
  <tr>
    <td>Async</td>
    <td>Sync</td>
  </tr>
  <tr>
    <td>no waiting</td>
    <td>executed in sequence</td>
  </tr>
  <tr>
    <td>various functions can be running at the same time</td>
    <td>each function gets executed one at a time</td>
  </tr>
</table>

<h4>Fetch</h4>
<p>Just a different way to make requests</p>

<h3>Basic Fetch Get Request</h3>
<pre><code>fetch('url')
  .then(response => response.json())
  .then(data => console.log(data));
</code></pre>

<div></div>

<h5>let's break it down:</h5>
<p>
  <code>.fetch('url')</code>: this takes in the url which you're wanting to make the call
</p>
<p>
  <code>.then()</code>: this returns a promise and is chain-able and takes in a function whose parameter is the result
  of a promise (from fetch or previous then statement) and this will be executed if the promise is SUCCESSFUL
</p>
<p>
  <code>.catch()</code>: this returns a promise and is chain-able and takes in a function whose parameter is the
  result
  of a promise (from fetch or previous then statement) and this will be executed if there is an ERROR
</p>

<h3>Let's add .catch()</h3>
<pre><code>fetch('https://jsonplaceholder.tyicode.com/todo')
    .then(response => response.json())
    .then(json => console.log(json))
    .catch((error) => {
    console.error('Error caught in catch method:', error);
});
</code></pre>

<h5>let's break it down:</h5>
<p>
  <code>.catch()</code>: this will catch and return any errors, also chain-able
</p>

<h3>Dog API</h3>
<div>
  <img src="" alt="" id="random-dog-image">
</div>

<h3>Fetch using POST request</h3>

<pre><code>const data = { title: 'example-title' };

fetch('https://jsonplaceholder.typicode.com/todos', {
    method: 'POST', // or 'PUT'
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
})
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
</code></pre>

<h5>let's break it down:</h5>
<p>
  <code>.fetch('url', {options})</code>: this takes in the url which you're wanting to make the call <br>
  <code>{options}</code>: To do a POST request we need to specify additional parameters with the request such as
  method, headers, etc.
</p>
<p>
<pre><code>.fetch('url', {
    // specify which type of request you're making
            method: 'POST',
            headers: {},
    // where you pass in actual data being added
            body: JSON.stringify(data)
        })</code></pre>
: options contains all the extra info needed in order to make a different kind of request and to send more info when
making a request

</p>

<h3>Creating Promises</h3>
<img src="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/promises.png" alt="">

<script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous"></script>
<script src="./js/js-ii/js-promises-lecture.js"></script>
</body>
</html>